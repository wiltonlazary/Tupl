<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Transaction (Tupl 1.3.8.1-SNAPSHOT API)</title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Transaction (Tupl 1.3.8.1-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":18,"i1":18,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":6,"i9":6,"i10":6,"i11":6,"i12":6,"i13":6,"i14":6,"i15":6,"i16":6,"i17":6,"i18":6,"i19":6,"i20":6,"i21":6,"i22":6,"i23":6,"i24":6,"i25":6,"i26":6,"i27":18,"i28":6,"i29":6,"i30":6,"i31":6,"i32":6,"i33":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Transaction.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/cojen/tupl/Snapshot.html" title="interface in org.cojen.tupl"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/cojen/tupl/Transformer.html" title="interface in org.cojen.tupl"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/cojen/tupl/Transaction.html" target="_top">Frames</a></li>
<li><a href="Transaction.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.cojen.tupl</div>
<h2 title="Interface Transaction" class="title">Interface Transaction</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public interface <span class="typeNameLabel">Transaction</span></pre>
<div class="block">Defines a logical unit of work. Transaction instances can only be safely
 used by one thread at a time, and they must be <a href="../../../org/cojen/tupl/Transaction.html#reset--"><code>reset</code></a> when no
 longer needed. Instances can be exchanged by threads, as long as a
 happens-before relationship is established. Without proper exclusion,
 multiple threads interacting with a Transaction instance may cause database
 corruption.

 <p>Transactions also contain various methods for directly controlling locks,
 although their use is not required. Methods which operate upon transactions
 acquire and release locks automatically. Direct control over locks is
 provided for advanced use cases. One such use is record filtering:

 <pre>
 Transaction txn = ...
 Cursor c = index.newCursor(txn);
 for (LockResult result = c.first(); c.key() != null; result = c.next()) {
     if (shouldDiscard(c.value()) &amp;&amp; result == LockResult.ACQUIRED) {
         // Unlock record which doesn't belong in the transaction.
         txn.unlock();
         continue;
     }
     ...
 }
 </pre>

 <p>Note: Transaction instances are never fully closed after they are reset
 or have fully exited. Any operation which acts upon a reset transaction can
 resurrect it.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../org/cojen/tupl/Database.html#newTransaction--"><code>Database.newTransaction</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../org/cojen/tupl/Transaction.html" title="interface in org.cojen.tupl">Transaction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#BOGUS">BOGUS</a></span></code>
<div class="block">Transaction instance which isn't a transaction at all.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>default void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#attach-java.lang.Object-">attach</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;obj)</code>
<div class="block">Attach an arbitrary object to this transaction instance, for tracking it.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>default <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#attachment--">attachment</a></span>()</code>
<div class="block">Returns any attachment which was set earlier.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#check--">check</a></span>()</code>
<div class="block">Checks the validity of the transaction.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#commit--">commit</a></span>()</code>
<div class="block">Commits all modifications made within the current transaction scope.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#commitAll--">commitAll</a></span>()</code>
<div class="block">Commits and exits all transaction scopes.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#customRedo-byte:A-long-byte:A-">customRedo</a></span>(byte[]&nbsp;message,
          long&nbsp;indexId,
          byte[]&nbsp;key)</code>
<div class="block">Supply a message for a custom redo handler.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#customUndo-byte:A-">customUndo</a></span>(byte[]&nbsp;message)</code>
<div class="block">Supply a message for a custom undo handler.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/DurabilityMode.html" title="enum in org.cojen.tupl">DurabilityMode</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#durabilityMode--">durabilityMode</a></span>()</code>
<div class="block">Returns the durability mode of this transaction.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#durabilityMode-org.cojen.tupl.DurabilityMode-">durabilityMode</a></span>(<a href="../../../org/cojen/tupl/DurabilityMode.html" title="enum in org.cojen.tupl">DurabilityMode</a>&nbsp;mode)</code>
<div class="block">Sets the durability mode for the entire transaction, not just the current scope.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#enter--">enter</a></span>()</code>
<div class="block">Enters a nested transaction scope.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#exit--">exit</a></span>()</code>
<div class="block">Exits the current transaction scope, rolling back all uncommitted
 modifications made within.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#isNested--">isNested</a></span>()</code>
<div class="block">Returns true if the current transaction scope is nested.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#lastLockedIndex--">lastLockedIndex</a></span>()</code>
<div class="block">Returns the index id of the last lock acquired, within the current scope.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#lastLockedKey--">lastLockedKey</a></span>()</code>
<div class="block">Returns the key of the last lock acquired, within the current scope.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#lockCheck-long-byte:A-">lockCheck</a></span>(long&nbsp;indexId,
         byte[]&nbsp;key)</code>
<div class="block">Checks the lock ownership for the given key.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#lockExclusive-long-byte:A-">lockExclusive</a></span>(long&nbsp;indexId,
             byte[]&nbsp;key)</code>
<div class="block">Attempts to acquire an exclusive lock for the given key, denying any
 additional locks.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#lockExclusive-long-byte:A-long-">lockExclusive</a></span>(long&nbsp;indexId,
             byte[]&nbsp;key,
             long&nbsp;nanosTimeout)</code>
<div class="block">Attempts to acquire an exclusive lock for the given key, denying any
 additional locks.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockMode.html" title="enum in org.cojen.tupl">LockMode</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#lockMode--">lockMode</a></span>()</code>
<div class="block">Returns the current lock mode.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#lockMode-org.cojen.tupl.LockMode-">lockMode</a></span>(<a href="../../../org/cojen/tupl/LockMode.html" title="enum in org.cojen.tupl">LockMode</a>&nbsp;mode)</code>
<div class="block">Sets the lock mode for the current scope.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#lockShared-long-byte:A-">lockShared</a></span>(long&nbsp;indexId,
          byte[]&nbsp;key)</code>
<div class="block">Attempts to acquire a shared lock for the given key, denying exclusive
 locks.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#lockShared-long-byte:A-long-">lockShared</a></span>(long&nbsp;indexId,
          byte[]&nbsp;key,
          long&nbsp;nanosTimeout)</code>
<div class="block">Attempts to acquire a shared lock for the given key, denying exclusive
 locks.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#lockTimeout-long-java.util.concurrent.TimeUnit-">lockTimeout</a></span>(long&nbsp;timeout,
           <a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code>
<div class="block">Sets the lock timeout for the current scope.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#lockTimeout-java.util.concurrent.TimeUnit-">lockTimeout</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code>
<div class="block">Returns the current lock timeout, in the given unit.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#lockUpgradable-long-byte:A-">lockUpgradable</a></span>(long&nbsp;indexId,
              byte[]&nbsp;key)</code>
<div class="block">Attempts to acquire an upgradable lock for the given key, denying
 exclusive and additional upgradable locks.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#lockUpgradable-long-byte:A-long-">lockUpgradable</a></span>(long&nbsp;indexId,
              byte[]&nbsp;key,
              long&nbsp;nanosTimeout)</code>
<div class="block">Attempts to acquire an upgradable lock for the given key, denying
 exclusive and additional upgradable locks.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#nestingLevel--">nestingLevel</a></span>()</code>
<div class="block">Counts the current transaction scope nesting level.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#reset--">reset</a></span>()</code>
<div class="block">Exits all transaction scopes, rolling back all uncommitted modifications.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>default void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#reset-java.lang.Throwable-">reset</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a>&nbsp;cause)</code>
<div class="block">Reset the transaction due to the given cause.</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#tryLockExclusive-long-byte:A-long-">tryLockExclusive</a></span>(long&nbsp;indexId,
                byte[]&nbsp;key,
                long&nbsp;nanosTimeout)</code>
<div class="block">Attempts to acquire an exclusive lock for the given key, denying any
 additional locks.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#tryLockShared-long-byte:A-long-">tryLockShared</a></span>(long&nbsp;indexId,
             byte[]&nbsp;key,
             long&nbsp;nanosTimeout)</code>
<div class="block">Attempts to acquire a shared lock for the given key, denying exclusive
 locks.</div>
</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#tryLockUpgradable-long-byte:A-long-">tryLockUpgradable</a></span>(long&nbsp;indexId,
                 byte[]&nbsp;key,
                 long&nbsp;nanosTimeout)</code>
<div class="block">Attempts to acquire an upgradable lock for the given key, denying
 exclusive and additional upgradable locks.</div>
</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#unlock--">unlock</a></span>()</code>
<div class="block">Fully releases last lock acquired, within the current scope.</div>
</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#unlockToShared--">unlockToShared</a></span>()</code>
<div class="block">Releases last lock acquired, within the current scope, retaining a
 shared lock.</div>
</td>
</tr>
<tr id="i33" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/cojen/tupl/Transaction.html#unlockToUpgradable--">unlockToUpgradable</a></span>()</code>
<div class="block">Releases last lock acquired or upgraded, within the current scope,
 retaining an upgradable lock.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="BOGUS">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BOGUS</h4>
<pre>static final&nbsp;<a href="../../../org/cojen/tupl/Transaction.html" title="interface in org.cojen.tupl">Transaction</a> BOGUS</pre>
<div class="block">Transaction instance which isn't a transaction at all. It always
 operates in an <a href="../../../org/cojen/tupl/LockMode.html#UNSAFE"><code>unsafe</code></a> lock mode and a <a href="../../../org/cojen/tupl/DurabilityMode.html#NO_REDO"><code>no-redo</code></a> durability mode. For safe auto-commit
 transactions, pass null for the transaction argument.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="lockMode-org.cojen.tupl.LockMode-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockMode</h4>
<pre>void&nbsp;lockMode(<a href="../../../org/cojen/tupl/LockMode.html" title="enum in org.cojen.tupl">LockMode</a>&nbsp;mode)</pre>
<div class="block">Sets the lock mode for the current scope. Transactions begin in <a href="../../../org/cojen/tupl/LockMode.html#UPGRADABLE_READ"><code>UPGRADABLE_READ</code></a> mode, and newly entered scopes
 begin at the outer scope's current mode. Exiting a scope reverts the
 lock mode.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>mode</code> - new lock mode</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if mode is null</dd>
</dl>
</li>
</ul>
<a name="lockMode--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockMode</h4>
<pre><a href="../../../org/cojen/tupl/LockMode.html" title="enum in org.cojen.tupl">LockMode</a>&nbsp;lockMode()</pre>
<div class="block">Returns the current lock mode.</div>
</li>
</ul>
<a name="lockTimeout-long-java.util.concurrent.TimeUnit-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockTimeout</h4>
<pre>void&nbsp;lockTimeout(long&nbsp;timeout,
                 <a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</pre>
<div class="block">Sets the lock timeout for the current scope. A negative timeout is
 infinite.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>unit</code> - required unit if timeout is more than zero</dd>
</dl>
</li>
</ul>
<a name="lockTimeout-java.util.concurrent.TimeUnit-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockTimeout</h4>
<pre>long&nbsp;lockTimeout(<a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</pre>
<div class="block">Returns the current lock timeout, in the given unit.</div>
</li>
</ul>
<a name="durabilityMode-org.cojen.tupl.DurabilityMode-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>durabilityMode</h4>
<pre>void&nbsp;durabilityMode(<a href="../../../org/cojen/tupl/DurabilityMode.html" title="enum in org.cojen.tupl">DurabilityMode</a>&nbsp;mode)</pre>
<div class="block">Sets the durability mode for the entire transaction, not just the current scope. The
 durability mode primarily affects commit behavior at the top-level scope, but it can also
 be used to switch redo logging behavior.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>mode</code> - new durability mode</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if mode is null</dd>
</dl>
</li>
</ul>
<a name="durabilityMode--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>durabilityMode</h4>
<pre><a href="../../../org/cojen/tupl/DurabilityMode.html" title="enum in org.cojen.tupl">DurabilityMode</a>&nbsp;durabilityMode()</pre>
<div class="block">Returns the durability mode of this transaction.</div>
</li>
</ul>
<a name="check--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>check</h4>
<pre>void&nbsp;check()
    throws <a href="../../../org/cojen/tupl/DatabaseException.html" title="class in org.cojen.tupl">DatabaseException</a></pre>
<div class="block">Checks the validity of the transaction.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/cojen/tupl/InvalidTransactionException.html" title="class in org.cojen.tupl">InvalidTransactionException</a></code> - if transaction is broken or was invalidated by
 an earlier exception</dd>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if transaction is bogus</dd>
<dd><code><a href="../../../org/cojen/tupl/DatabaseException.html" title="class in org.cojen.tupl">DatabaseException</a></code></dd>
</dl>
</li>
</ul>
<a name="commit--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit</h4>
<pre>void&nbsp;commit()
     throws <a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Commits all modifications made within the current transaction scope. The
 current scope is still valid after this method is called, unless an
 exception is thrown. Call exit or reset to fully release transaction
 resources.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="commitAll--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commitAll</h4>
<pre>void&nbsp;commitAll()
        throws <a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Commits and exits all transaction scopes.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="enter--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enter</h4>
<pre>void&nbsp;enter()
    throws <a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Enters a nested transaction scope.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="exit--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>exit</h4>
<pre>void&nbsp;exit()
   throws <a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Exits the current transaction scope, rolling back all uncommitted
 modifications made within. The transaction is still valid after this
 method is called, unless an exception is thrown.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="reset--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reset</h4>
<pre>void&nbsp;reset()
    throws <a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Exits all transaction scopes, rolling back all uncommitted modifications. Equivalent to:

 <pre>
 while (txn.isNested()) {
     txn.exit();
 }
 txn.exit();
 </pre></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="reset-java.lang.Throwable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reset</h4>
<pre>default&nbsp;void&nbsp;reset(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a>&nbsp;cause)</pre>
<div class="block">Reset the transaction due to the given cause. This provides an opportunity to prevent
 this transaction from being used any further. No exception is thrown when invoking this
 method.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>cause</code> - pass a cause to reset and disable the transaction; pass null to simply
 reset the transaction and ignore any exception when doing so</dd>
</dl>
</li>
</ul>
<a name="lockShared-long-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockShared</h4>
<pre><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;lockShared(long&nbsp;indexId,
                      byte[]&nbsp;key)
               throws <a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></pre>
<div class="block">Attempts to acquire a shared lock for the given key, denying exclusive
 locks. If return value is <a href="../../../org/cojen/tupl/LockResult.html#alreadyOwned--"><code>owned</code></a>, transaction
 already owns a strong enough lock, and no extra unlock should be
 performed.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - non-null key to lock; instance is not cloned</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><a href="../../../org/cojen/tupl/LockResult.html#ACQUIRED"><code>ACQUIRED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_SHARED"><code>OWNED_SHARED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_UPGRADABLE"><code>OWNED_UPGRADABLE</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if too many shared locks</dd>
<dd><code><a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></code> - if interrupted or timed out</dd>
<dd><code><a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></code> - if deadlock was detected after waiting full timeout</dd>
</dl>
</li>
</ul>
<a name="lockUpgradable-long-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockUpgradable</h4>
<pre><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;lockUpgradable(long&nbsp;indexId,
                          byte[]&nbsp;key)
                   throws <a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></pre>
<div class="block">Attempts to acquire an upgradable lock for the given key, denying
 exclusive and additional upgradable locks. If return value is <a href="../../../org/cojen/tupl/LockResult.html#alreadyOwned--"><code>owned</code></a>, transaction already owns a strong enough
 lock, and no extra unlock should be performed.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - non-null key to lock; instance is not cloned</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><a href="../../../org/cojen/tupl/LockResult.html#ACQUIRED"><code>ACQUIRED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_UPGRADABLE"><code>OWNED_UPGRADABLE</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></code> - if interrupted, timed out, or illegal upgrade</dd>
<dd><code><a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></code> - if deadlock was detected after waiting full timeout</dd>
</dl>
</li>
</ul>
<a name="lockExclusive-long-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockExclusive</h4>
<pre><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;lockExclusive(long&nbsp;indexId,
                         byte[]&nbsp;key)
                  throws <a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></pre>
<div class="block">Attempts to acquire an exclusive lock for the given key, denying any
 additional locks. If return value is <a href="../../../org/cojen/tupl/LockResult.html#alreadyOwned--"><code>owned</code></a>,
 transaction already owns exclusive lock, and no extra unlock should be
 performed.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - non-null key to lock; instance is not cloned</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><a href="../../../org/cojen/tupl/LockResult.html#ACQUIRED"><code>ACQUIRED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#UPGRADED"><code>UPGRADED</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></code> - if interrupted, timed out, or illegal upgrade</dd>
<dd><code><a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></code> - if deadlock was detected after waiting full timeout</dd>
</dl>
</li>
</ul>
<a name="customRedo-byte:A-long-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>customRedo</h4>
<pre>void&nbsp;customRedo(byte[]&nbsp;message,
                long&nbsp;indexId,
                byte[]&nbsp;key)
         throws <a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Supply a message for a custom redo handler. Redo operations should be paired with undo
 operations.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>message</code> - message to pass to transaction handler</dd>
<dd><code>indexId</code> - index for lock acquisition; zero if not applicable</dd>
<dd><code>key</code> - key which has been locked exclusively; null if not applicable</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if no transaction handler is installed</dd>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../org/cojen/tupl/ext/TransactionHandler.html" title="interface in org.cojen.tupl.ext"><code>TransactionHandler</code></a></dd>
</dl>
</li>
</ul>
<a name="customUndo-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>customUndo</h4>
<pre>void&nbsp;customUndo(byte[]&nbsp;message)
         throws <a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Supply a message for a custom undo handler. Undo operations should be paired with redo
 operations.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>message</code> - message to pass to transaction handler</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if no transaction handler is installed</dd>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../org/cojen/tupl/ext/TransactionHandler.html" title="interface in org.cojen.tupl.ext"><code>TransactionHandler</code></a></dd>
</dl>
</li>
</ul>
<a name="isNested--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isNested</h4>
<pre>boolean&nbsp;isNested()</pre>
<div class="block">Returns true if the current transaction scope is nested.</div>
</li>
</ul>
<a name="nestingLevel--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nestingLevel</h4>
<pre>int&nbsp;nestingLevel()</pre>
<div class="block">Counts the current transaction scope nesting level. Count is zero if non-nested.</div>
</li>
</ul>
<a name="tryLockShared-long-byte:A-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryLockShared</h4>
<pre><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;tryLockShared(long&nbsp;indexId,
                         byte[]&nbsp;key,
                         long&nbsp;nanosTimeout)
                  throws <a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></pre>
<div class="block">Attempts to acquire a shared lock for the given key, denying exclusive
 locks. If return value is <a href="../../../org/cojen/tupl/LockResult.html#alreadyOwned--"><code>owned</code></a>, transaction
 already owns a strong enough lock, and no extra unlock should be
 performed.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - non-null key to lock; instance is not cloned</dd>
<dd><code>nanosTimeout</code> - maximum time to wait for lock; negative timeout is infinite</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><a href="../../../org/cojen/tupl/LockResult.html#INTERRUPTED"><code>INTERRUPTED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#TIMED_OUT_LOCK"><code>TIMED_OUT_LOCK</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#ACQUIRED"><code>ACQUIRED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_SHARED"><code>OWNED_SHARED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_UPGRADABLE"><code>OWNED_UPGRADABLE</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if too many shared locks</dd>
<dd><code><a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></code> - if deadlock was detected after waiting full timeout</dd>
</dl>
</li>
</ul>
<a name="lockShared-long-byte:A-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockShared</h4>
<pre><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;lockShared(long&nbsp;indexId,
                      byte[]&nbsp;key,
                      long&nbsp;nanosTimeout)
               throws <a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></pre>
<div class="block">Attempts to acquire a shared lock for the given key, denying exclusive
 locks. If return value is <a href="../../../org/cojen/tupl/LockResult.html#alreadyOwned--"><code>owned</code></a>, transaction
 already owns a strong enough lock, and no extra unlock should be
 performed.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - non-null key to lock; instance is not cloned</dd>
<dd><code>nanosTimeout</code> - maximum time to wait for lock; negative timeout is infinite</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><a href="../../../org/cojen/tupl/LockResult.html#ACQUIRED"><code>ACQUIRED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_SHARED"><code>OWNED_SHARED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_UPGRADABLE"><code>OWNED_UPGRADABLE</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if too many shared locks</dd>
<dd><code><a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></code> - if interrupted or timed out</dd>
<dd><code><a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></code> - if deadlock was detected after waiting full timeout</dd>
</dl>
</li>
</ul>
<a name="tryLockUpgradable-long-byte:A-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryLockUpgradable</h4>
<pre><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;tryLockUpgradable(long&nbsp;indexId,
                             byte[]&nbsp;key,
                             long&nbsp;nanosTimeout)
                      throws <a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></pre>
<div class="block">Attempts to acquire an upgradable lock for the given key, denying
 exclusive and additional upgradable locks. If return value is <a href="../../../org/cojen/tupl/LockResult.html#alreadyOwned--"><code>owned</code></a>, transaction already owns a strong enough
 lock, and no extra unlock should be performed. If <a href="../../../org/cojen/tupl/LockResult.html#ILLEGAL"><code>ILLEGAL</code></a> is returned, transaction holds a shared
 lock, which cannot be upgraded.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - non-null key to lock; instance is not cloned</dd>
<dd><code>nanosTimeout</code> - maximum time to wait for lock; negative timeout is infinite</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><a href="../../../org/cojen/tupl/LockResult.html#ILLEGAL"><code>ILLEGAL</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#INTERRUPTED"><code>INTERRUPTED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#TIMED_OUT_LOCK"><code>TIMED_OUT_LOCK</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#ACQUIRED"><code>ACQUIRED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_UPGRADABLE"><code>OWNED_UPGRADABLE</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></code> - if deadlock was detected after waiting full timeout</dd>
</dl>
</li>
</ul>
<a name="lockUpgradable-long-byte:A-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockUpgradable</h4>
<pre><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;lockUpgradable(long&nbsp;indexId,
                          byte[]&nbsp;key,
                          long&nbsp;nanosTimeout)
                   throws <a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></pre>
<div class="block">Attempts to acquire an upgradable lock for the given key, denying
 exclusive and additional upgradable locks. If return value is <a href="../../../org/cojen/tupl/LockResult.html#alreadyOwned--"><code>owned</code></a>, transaction already owns a strong enough
 lock, and no extra unlock should be performed.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - non-null key to lock; instance is not cloned</dd>
<dd><code>nanosTimeout</code> - maximum time to wait for lock; negative timeout is infinite</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><a href="../../../org/cojen/tupl/LockResult.html#ACQUIRED"><code>ACQUIRED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_UPGRADABLE"><code>OWNED_UPGRADABLE</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></code> - if interrupted, timed out, or illegal upgrade</dd>
<dd><code><a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></code> - if deadlock was detected after waiting full timeout</dd>
</dl>
</li>
</ul>
<a name="tryLockExclusive-long-byte:A-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryLockExclusive</h4>
<pre><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;tryLockExclusive(long&nbsp;indexId,
                            byte[]&nbsp;key,
                            long&nbsp;nanosTimeout)
                     throws <a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></pre>
<div class="block">Attempts to acquire an exclusive lock for the given key, denying any
 additional locks. If return value is <a href="../../../org/cojen/tupl/LockResult.html#alreadyOwned--"><code>owned</code></a>, transaction already owns exclusive lock, and no extra unlock
 should be performed. If <a href="../../../org/cojen/tupl/LockResult.html#ILLEGAL"><code>ILLEGAL</code></a> is returned,
 transaction holds a shared lock, which cannot be upgraded.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - non-null key to lock; instance is not cloned</dd>
<dd><code>nanosTimeout</code> - maximum time to wait for lock; negative timeout is infinite</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><a href="../../../org/cojen/tupl/LockResult.html#ILLEGAL"><code>ILLEGAL</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#INTERRUPTED"><code>INTERRUPTED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#TIMED_OUT_LOCK"><code>TIMED_OUT_LOCK</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#ACQUIRED"><code>ACQUIRED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#UPGRADED"><code>UPGRADED</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></code> - if deadlock was detected after waiting full timeout</dd>
</dl>
</li>
</ul>
<a name="lockExclusive-long-byte:A-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockExclusive</h4>
<pre><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;lockExclusive(long&nbsp;indexId,
                         byte[]&nbsp;key,
                         long&nbsp;nanosTimeout)
                  throws <a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></pre>
<div class="block">Attempts to acquire an exclusive lock for the given key, denying any
 additional locks. If return value is <a href="../../../org/cojen/tupl/LockResult.html#alreadyOwned--"><code>owned</code></a>,
 transaction already owns exclusive lock, and no extra unlock should be
 performed.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - non-null key to lock; instance is not cloned</dd>
<dd><code>nanosTimeout</code> - maximum time to wait for lock; negative timeout is infinite</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><a href="../../../org/cojen/tupl/LockResult.html#ACQUIRED"><code>ACQUIRED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#UPGRADED"><code>UPGRADED</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></code> - if interrupted, timed out, or illegal upgrade</dd>
<dd><code><a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></code> - if deadlock was detected after waiting full timeout</dd>
</dl>
</li>
</ul>
<a name="lockCheck-long-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockCheck</h4>
<pre><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;lockCheck(long&nbsp;indexId,
                     byte[]&nbsp;key)</pre>
<div class="block">Checks the lock ownership for the given key.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><a href="../../../org/cojen/tupl/LockResult.html#UNOWNED"><code>UNOWNED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_SHARED"><code>OWNED_SHARED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_UPGRADABLE"><code>OWNED_UPGRADABLE</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd>
</dl>
</li>
</ul>
<a name="lastLockedIndex--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastLockedIndex</h4>
<pre>long&nbsp;lastLockedIndex()</pre>
<div class="block">Returns the index id of the last lock acquired, within the current scope.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>locked index id</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if no locks held</dd>
</dl>
</li>
</ul>
<a name="lastLockedKey--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastLockedKey</h4>
<pre>byte[]&nbsp;lastLockedKey()</pre>
<div class="block">Returns the key of the last lock acquired, within the current scope.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>locked key; instance is not cloned</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if no locks held</dd>
</dl>
</li>
</ul>
<a name="unlock--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlock</h4>
<pre>void&nbsp;unlock()</pre>
<div class="block">Fully releases last lock acquired, within the current scope. If the last
 lock operation was an upgrade, for a lock not immediately acquired,
 unlock is not allowed. Instead, an IllegalStateException is thrown.

 <p><i>Note: This method is intended for advanced use cases.</i> Also, the current
 implementation does not accurately track scopes. It may permit an unlock operation to
 cross a scope boundary, which has undefined behavior.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if no locks held, or if unlocking a
 non-immediate upgrade</dd>
</dl>
</li>
</ul>
<a name="unlockToShared--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlockToShared</h4>
<pre>void&nbsp;unlockToShared()</pre>
<div class="block">Releases last lock acquired, within the current scope, retaining a
 shared lock. If the last lock operation was an upgrade, for a lock not
 immediately acquired, unlock is not allowed. Instead, an
 IllegalStateException is thrown.

 <p><i>Note: This method is intended for advanced use cases.</i> Also, the current
 implementation does not accurately track scopes. It may permit an unlock operation to
 cross a scope boundary, which has undefined behavior.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if no locks held, or if too many shared
 locks, or if unlocking a non-immediate upgrade</dd>
</dl>
</li>
</ul>
<a name="unlockToUpgradable--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlockToUpgradable</h4>
<pre>void&nbsp;unlockToUpgradable()</pre>
<div class="block">Releases last lock acquired or upgraded, within the current scope,
 retaining an upgradable lock.

 <p><i>Note: This method is intended for advanced use cases.</i> Also, the current
 implementation does not accurately track scopes. It may permit an unlock operation to
 cross a scope boundary, which has undefined behavior.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if no locks held, or if last lock is shared</dd>
</dl>
</li>
</ul>
<a name="attach-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>attach</h4>
<pre>default&nbsp;void&nbsp;attach(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;obj)</pre>
<div class="block">Attach an arbitrary object to this transaction instance, for tracking it. Attachments
 can become visible to other threads as a result of a <a href="../../../org/cojen/tupl/LockTimeoutException.html" title="class in org.cojen.tupl"><code>LockTimeoutException</code></a>. A
 happens-before relationship is guaranteed only if the attachment is set before the
 associated lock is acquired. Also, the LockTimeoutException constructor calls toString
 on the attachment, and includes it in the message. A non-default toString implementation
 must consider thread-safety.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>obj</code> - the object to be attached; may be null</dd>
</dl>
</li>
</ul>
<a name="attachment--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>attachment</h4>
<pre>default&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;attachment()</pre>
<div class="block">Returns any attachment which was set earlier.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the current attachment, or null if none</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Transaction.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/cojen/tupl/Snapshot.html" title="interface in org.cojen.tupl"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/cojen/tupl/Transformer.html" title="interface in org.cojen.tupl"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/cojen/tupl/Transaction.html" target="_top">Frames</a></li>
<li><a href="Transaction.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2011&#x2013;2016 <a href="https://github.com/cojen">Cojen</a>. All rights reserved.</small></p>
</body>
</html>
